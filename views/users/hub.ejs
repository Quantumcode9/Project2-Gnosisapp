<%- include('../partials/header') %>

<div class="container-fluid">
    <!-- Favorite Shows -->
    <h3>Favorite Shows</h3>
    <div class="scroll-container">
        <div class="d-flex">
            <% favorites.forEach(show => { %>
                <div class="hub-card">
                    <a href="/pages/show/<%= show.id %>">
                    <img src="https://image.tmdb.org/t/p/w500<%= show.poster_path %>" alt="<%= show.name %>">
                </a>
                    <h4><%= show.name %></h4>
                    <p>Rating: <%= show.rating %></p>
                    <p>Last Air Date: <%= show.last_air_date %></p>
                </div>
            <% }); %>
        </div>
    </div>
                              <!-- Watchlist -->
  
                <h3>Watchlist</h3>
            <div class="scroll-container">
                <div class="d-flex">
            <% watchlist.forEach(show => { %>
                     <div class="hub-card">
         <a href="/pages/show/<%= show.id %>">
     <img src="https://image.tmdb.org/t/p/w500<%= show.poster_path %>" alt="<%= show.name %>"> 
                     </a>     
        <h4><%= show.name %></h4>
            <p>Rating: <%= show.rating %></p>
                   <p>Last Air Date: <%= show.last_air_date %></p>
                   <form action="/delete-show/<%= show.id %>" method="POST">
                    <button type="submit" class="btn btn-danger">Delete This Show from All Watchlists</button>
                  </form>
                              </div>
                                      <% }); %>
                                  </div>
                              </div>
                          


      

       <!-- Watched Shows -->

       <h3>Watched Shows</h3>
       <div class="scroll-container">
           <div class="d-flex">
               <% watched.forEach(show => { %>
                   <div class="hub-card">
                          <a href="/pages/show/<%= show.id %>">
                       <img src="https://image.tmdb.org/t/p/w500<%= show.poster_path %>" alt="<%= show.name %>" class="hub-image">
                    </a> 
                       <h4><%= show.name %></h4>                
                       <p>User Rating: <%= show.user_rating %>/10</p>
                       <p>Last Air Date: <%= show.last_air_date %></p>
                   </div>
               <% }); %>
           </div>
       </div>
       







        <!-- Change This -->
        <h3>Recent</h3>
        <div class="scroll-container">
            <div class="d-flex flex-nowrap">
                <% watched.forEach(show => { %>
                    <div class="col-md-4 col-sm-6 col-xs-12">
                        <div class="hub-card">
                            <a href="/pages/show/<%= show.id %>" class="show-link" data-show-id="<%= show.id %>">
                                <img src="https://image.tmdb.org/t/p/w500<%= show.poster_path %>" alt="<%= show.name %>" class="hub-image">
                            </a>
                            <h4><%= show.name %></h4>
                            <p>User Rating: <%= show.user_rating %>/10</p>
                            <p>Last Air Date: <%= show.last_air_date %></p>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>

<%- include('../partials/footer') %>




<script>
document.addEventListener('DOMContentLoaded', () => {
  // Attach a touchstart event listener to each link
  document.querySelectorAll('.show-link').forEach((link) => {
    let touchstartX = 0;
    let touchendX = 0;

    link.addEventListener('touchstart', (e) => {
      // Get the initial position of the touch
      touchstartX = e.changedTouches[0].screenX;
    });

    link.addEventListener('touchend', (e) => {
      // Get the final position of the touch
      touchendX = e.changedTouches[0].screenX;
      // Check if the touch moved more than a threshold, e.g., 10px
      if (Math.abs(touchstartX - touchendX) < 10) {
        // If movement is less than 10px, it's a tap
        window.location.href = link.getAttribute('href');
      }
      // Otherwise, it was a scroll, and we don't navigate
    });
  });
});
</script>


